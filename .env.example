# ============================================================================
# Environment Variables for CueBX Application
# ============================================================================
# Copy this file to .env and fill in the values.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#
# Variables marked with (required) have no usable default and MUST be set.
# Variables marked with (production) MUST be changed from defaults in prod.
# ============================================================================

# ==========================================================================
# Application Settings
# ==========================================================================
ENVIRONMENT=development          # development | production
API_DOMAIN=http://localhost:8000
DEBUG=false
ROOT_PATH=/v1

# ==========================================================================
# Database Configuration  (required)
# ==========================================================================
DATABASE_URL=postgresql+asyncpg://cubex:cubex@localhost:5432/cubex

# Docker Compose helper vars (used by postgres service, not by the app)
POSTGRES_USER=cubex
POSTGRES_PASSWORD=cubex
POSTGRES_DB=cubex
POSTGRES_PORT=5432

# ==========================================================================
# Redis Configuration
# ==========================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PORT=6379

# ==========================================================================
# RabbitMQ Configuration
# ==========================================================================
RABBITMQ_URL=amqp://guest:guest@localhost:5672//

# Docker Compose helper vars
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# ==========================================================================
# Session & JWT  (production — change these)
# ==========================================================================
SESSION_SECRET_KEY=supersecretkey
SESSION_COOKIE_NAME=session
SESSION_SAME_SITE_COOKIE_POLICY=lax   # lax | strict | none

JWT_SECRET_KEY=another_supersecret_key
JWT_ALGORITHM=HS256

# ==========================================================================
# OTP Configuration  (production — change HMAC secret)
# ==========================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=10
OTP_HMAC_SECRET=otp_hmac_secret_key_change_in_production
OTP_MAX_ATTEMPTS=5

# ==========================================================================
# OAuth — Google
# ==========================================================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ==========================================================================
# OAuth — GitHub
# ==========================================================================
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# OAuth callback base (the app appends /{provider}/callback)
OAUTH_REDIRECT_BASE_URI=http://localhost:8000/auth

# ==========================================================================
# Stripe  (production — change these)
# ==========================================================================
STRIPE_API_KEY=your_stripe_api_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret
STRIPE_API_BASE_URL=https://api.stripe.com

# Stripe price IDs — CueBX API product
STRIPE_CUBEX_API_PRICE_PROFESSIONAL=price_1NEXAMPLEPROFESSIONAL
STRIPE_CUBEX_API_PRICE_BASIC=price_1NEXAMPLEBASIC
STRIPE_CUBEX_API_SEAT_PRICE_PROFESSIONAL=price_1NEXAMPLEPROFESSIONALSEAT
STRIPE_CUBEX_API_SEAT_PRICE_BASIC=price_1NEXAMPLEBASICSEAT

# Stripe price IDs — CueBX Career product
STRIPE_CUBEX_CAREER_PRICE_PLUS=price_1NEXAMPLECAREERPLUS
STRIPE_CUBEX_CAREER_PRICE_PRO=price_1NEXAMPLECAREERPRO

# ==========================================================================
# Email — Brevo
# ==========================================================================
BREVO_API_KEY=your_brevo_api_key
BREVO_BASE_URL=https://api.brevo.com/v3
BREVO_SENDER_EMAIL=noreply@yourdomain.com
BREVO_SENDER_NAME=CueBX

# ==========================================================================
# Cloudinary (file/image uploads)
# ==========================================================================
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# ==========================================================================
# Internal API (service-to-service auth)  (production — change this)
# ==========================================================================
INTERNAL_API_SECRET=internal_api_secret_change_in_production

# ==========================================================================
# Admin Panel  (production — change password)
# ==========================================================================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin_password_change_in_production
ADMIN_ALERT_EMAIL=                    # Email for DLQ / system alerts (optional)

# ==========================================================================
# Sentry (error monitoring)
# ==========================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==========================================================================
# CORS
# ==========================================================================
CORS_ALLOW_ORIGINS=["http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true

# ==========================================================================
# Rate Limiting & Quota Cache
# ==========================================================================
RATE_LIMIT_BACKEND=memory             # memory | redis
RATE_LIMIT_DEFAULT_REQUESTS=100
RATE_LIMIT_DEFAULT_WINDOW=60          # seconds

QUOTA_CACHE_BACKEND=memory            # memory | redis

# ==========================================================================
# Infrastructure Flags
# ==========================================================================
ENABLE_SCHEDULER=true                 # Start APScheduler in API process
ENABLE_MESSAGING=true                 # Start RabbitMQ consumers in API process

# ==========================================================================
# Misc
# ==========================================================================
USER_SOFT_DELETE_RETENTION_DAYS=30
USAGE_LOG_PENDING_TIMEOUT_MINUTES=15

# ==========================================================================
# Docker Compose helper
# ==========================================================================
API_PORT=8000
